{"version":3,"sources":["../../../../../source/esmodule/test/library/worker-pool/next-worker-pool.test.js"],"names":[],"mappings":"yDAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,IAAP,MAAiB,KAAjB;;AAEA,SAAS,cAAT,QAA+B,mBAA/B;;AAEA,MAAM,OAAO,GALb,cAAc,CAAC,MAAM,CAAC,IAAP,CAAY,GAAb,CAKd;;AAEA,IAAI,CAAC,sDAAD,EAAyD,OAAO,IAAP,KAAgB;;AAE3E,QAAM,OAAO,GAAG,KAAK,CAAC,aAAN,EAAhB;;AAEA,MAAI;;AAEF,QAAI,IAAI,GAAG,IAAI,cAAJ,CAAmB,OAAO,CAAC,OAAR,CAAgB,cAAhB,CAAnB,CAAX;;AAEA,QAAI;;AAEF,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EAAkB,gBAAlB;;AAEA,YAAM,IAAI,CAAC,MAAL,CAAY,MAAZ,EAAN;;AAEA,MAAA,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,cAAL,CAAoB,UAA9B;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,cAAL,CAAoB,UAApB,CAA+B,QAA/B,EAAyC,EAAzC,CAAV;;AAED,KATD,SASU;AACR,YAAM,IAAI,CAAC,IAAL,EAAN;AACD;;AAEF,GAjBD,SAiBU;AACR,IAAA,OAAO,CAAC,OAAR;AACD;;AAEF,CAzBG,CAAJ","file":"next-worker-pool.test.js","sourcesContent":["import Sinon from 'sinon'\nimport Test from 'ava'\n\nimport { NextWorkerPool } from '../../../index.js'\n\nconst Require = __require\n\nTest('NextWorkerPool._selectProcess(methodName, parameter)', async (test) => {\n\n  const sandbox = Sinon.createSandbox()\n\n  try {\n\n    let pool = new NextWorkerPool(Require.resolve('../worker.js'))\n\n    try {\n\n      sandbox.spy(pool, '_selectProcess')\n\n      await pool.module.getPid()\n\n      test.true(pool._selectProcess.calledOnce)\n      test.true(pool._selectProcess.calledWith('getPid', []))\n\n    } finally {\n      await pool.exit()\n    }\n  \n  } finally {\n    sandbox.restore()\n  }\n\n})\n\n"]}