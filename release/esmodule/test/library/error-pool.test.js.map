{"version":3,"sources":["../../../../source/esmodule/test/library/error-pool.test.js"],"names":[],"mappings":"AAAA,SAAS,EAAT,QAAmB,6BAAnB;AACA,OAAO,IAAP,MAAiB,KAAjB;;AAEA,SAAS,SAAT,QAA0B,iBAA1B;;AAEA,IAAI,CAAC,iBAAD,EAAoB,OAAO,IAAP,KAAgB;;AAEtC,MAAI,EAAE,CAAC,OAAH,EAAJ,EAAkB;AAChB,IAAA,IAAI,CAAC,MAAL,CAAY,MAAM,IAAI,SAAJ,CAAc,EAAE,mBAAmB,CAArB,EAAd,CAAlB,EAA2D,EAAE,QAAQ,SAAV,EAA3D;AACD,GAFD,MAEO;;AAEL,QAAI,IAAI,GAAG,IAAI,SAAJ,CAAc,EAAE,mBAAmB,CAArB,EAAd,CAAX;AACA,QAAI,KAAK,GAAG,MAAM,IAAI,OAAJ,CAAY,CAAC,OAAD,KAAa;;AAEzC,UAAI,OAAO,GAAG,IAAd;;AAEA,MAAA,IAAI,CAAC,EAAL,CAAQ,OAAR,EAAiB,OAAO,GAAG,CAAC,KAAD,EAAQ,OAAR,EAAiB,KAAjB,KAA2B;AACpD,QAAA,IAAI,CAAC,GAAL,CAAU,+BAA8B,KAAM,eAAc,KAAK,CAAC,IAAK,gBAAvE;;AAEA,QAAA,IAAI,CAAC,GAAL,CAAS,OAAT,EAAkB,OAAlB;AACA,QAAA,OAAO,GAAG,IAAV;;AAEA,QAAA,OAAO,CAAC,KAAD,CAAP;;AAED,OARD;;AAUD,KAdiB,CAAlB;;AAgBA,IAAA,IAAI,CAAC,EAAL,CAAQ,KAAK,CAAC,IAAd,EAAoB,QAApB;;AAED;;AAEF,CA3BG,CAAJ","file":"error-pool.test.js","sourcesContent":["import { Is } from '@virtualpatterns/mablung-is'\nimport Test from 'ava'\n\nimport { ErrorPool } from './error-pool.js'\n\nTest('new ErrorPool()', async (test) => {\n\n  if (Is.windows()) {\n    test.throws(() => new ErrorPool({ 'numberOfProcess': 1 }), { 'code': 'UNKNOWN'})\n  } else {\n\n    let pool = new ErrorPool({ 'numberOfProcess': 1 })\n    let error = await new Promise((resolve) => {\n\n      let onError = null\n\n      pool.on('error', onError = (index, process, error) => {\n        test.log(`pool.on('error', onError = (${index}, process, '${error.code}') => { ... })`)\n\n        pool.off('error', onError)\n        onError = null\n\n        resolve(error)\n\n      })\n\n    })\n\n    test.is(error.code, 'EACCES')\n\n  }\n\n})\n"]}