{"version":3,"sources":["../../../source/test/library/error-pool.test.js"],"names":["Test","ErrorPool","test","pool","error","Promise","resolve","onError","on","processInformation","_error","push","length","numberOfProcess","off","is","code"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,KAAjB;;AAEA,SAASC,SAAT,QAA0B,iBAA1B;;AAEAD,IAAI,CAAC,iBAAD,EAAoB,MAAOE,IAAP,IAAgB;;AAEtC,MAAIC,IAAI,GAAG,IAAIF,SAAJ,CAAc,EAAE,yBAAyB,CAA3B,EAA8B,mBAAmB,CAAjD,EAAd,CAAX;AACA,MAAIG,KAAK,GAAG,MAAM,IAAIC,OAAJ,CAAaC,OAAD,IAAa;;AAEzC,QAAIF,KAAK,GAAG,EAAZ;AACA,QAAIG,OAAO,GAAG,IAAd;;AAEAJ,IAAAA,IAAI,CAACK,EAAL,CAAQ,OAAR,EAAiBD,OAAO,GAAG,CAACE,kBAAD,EAAqBC,MAArB,KAAgC;;AAEzDN,MAAAA,KAAK,CAACO,IAAN,CAAWD,MAAX;;AAEA,UAAIN,KAAK,CAACQ,MAAN,KAAiBT,IAAI,CAACU,eAA1B,EAA2C;;AAEzCV,QAAAA,IAAI,CAACW,GAAL,CAAS,OAAT,EAAkBP,OAAlB;AACAA,QAAAA,OAAO,GAAG,IAAV;;AAEAD,QAAAA,OAAO,CAACF,KAAD,CAAP;;AAED;;AAEF,KAbD;;AAeD,GApBiB,CAAlB;;AAsBAF,EAAAA,IAAI,CAACa,EAAL,CAAQX,KAAK,CAAC,CAAD,CAAL,CAASY,IAAjB,EAAuB,QAAvB;;AAED,CA3BG,CAAJ","sourcesContent":["import Test from 'ava'\n\nimport { ErrorPool } from './error-pool.js'\n\nTest('new ErrorPool()', async (test) => {\n\n  let pool = new ErrorPool({ 'maximumNumberOfCreate': 0, 'numberOfProcess': 2 })\n  let error = await new Promise((resolve) => {\n\n    let error = []\n    let onError = null\n\n    pool.on('error', onError = (processInformation, _error) => {\n\n      error.push(_error)\n\n      if (error.length === pool.numberOfProcess) {\n\n        pool.off('error', onError)\n        onError = null\n\n        resolve(error)\n\n      }\n\n    })\n\n  })\n\n  test.is(error[0].code, 'ENOENT')\n\n})\n"],"file":"error-pool.test.js"}