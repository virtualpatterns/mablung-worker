{"version":3,"sources":["../../../source/test/library/error-pool.test.js"],"names":["Test","ErrorPool","test","pool","error","Promise","resolve","onError","on","index","process","log","code","off","is"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,KAAjB;;AAEA,SAASC,SAAT,QAA0B,iBAA1B;;AAEAD,IAAI,CAAC,iBAAD,EAAoB,MAAOE,IAAP,IAAgB;;AAEtC,MAAIC,IAAI,GAAG,IAAIF,SAAJ,CAAc,EAAE,mBAAmB,CAArB,EAAd,CAAX;AACA,MAAIG,KAAK,GAAG,MAAM,IAAIC,OAAJ,CAAaC,OAAD,IAAa;;AAEzC,QAAIC,OAAO,GAAG,IAAd;;AAEAJ,IAAAA,IAAI,CAACK,EAAL,CAAQ,OAAR,EAAiBD,OAAO,GAAG,CAACE,KAAD,EAAQC,OAAR,EAAiBN,KAAjB,KAA2B;AACpDF,MAAAA,IAAI,CAACS,GAAL,CAAU,+BAA8BF,KAAM,eAAcL,KAAK,CAACQ,IAAK,gBAAvE;;AAEAT,MAAAA,IAAI,CAACU,GAAL,CAAS,OAAT,EAAkBN,OAAlB;AACAA,MAAAA,OAAO,GAAG,IAAV;;AAEAD,MAAAA,OAAO,CAACF,KAAD,CAAP;;AAED,KARD;;AAUD,GAdiB,CAAlB;;AAgBAF,EAAAA,IAAI,CAACY,EAAL,CAAQV,KAAK,CAACQ,IAAd,EAAoB,QAApB;;AAED,CArBG,CAAJ","sourcesContent":["import Test from 'ava'\n\nimport { ErrorPool } from './error-pool.js'\n\nTest('new ErrorPool()', async (test) => {\n\n  let pool = new ErrorPool({ 'numberOfProcess': 1 })\n  let error = await new Promise((resolve) => {\n\n    let onError = null\n\n    pool.on('error', onError = (index, process, error) => {\n      test.log(`pool.on('error', onError = (${index}, process, '${error.code}') => { ... })`)\n\n      pool.off('error', onError)\n      onError = null\n\n      resolve(error)\n\n    })\n\n  })\n\n  test.is(error.code, 'EACCES')\n\n})\n"],"file":"error-pool.test.js"}