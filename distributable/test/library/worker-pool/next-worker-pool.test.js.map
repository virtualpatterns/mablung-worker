{"version":3,"sources":["../../../../source/test/library/worker-pool/next-worker-pool.test.js"],"names":["Sinon","Test","NextWorkerPool","Require","_createRequire","import","meta","url","test","sandbox","createSandbox","pool","resolve","spy","module","getPid","true","_selectProcess","calledOnce","end","restore"],"mappings":"yDAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,KAAjB;;AAEA,SAASC,cAAT,QAA+B,mBAA/B;;AAEA,MAAMC,OAAO,GALbC,cAAc,CAACC,MAAM,CAACC,IAAP,CAAYC,GAAb,CAKd;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEAN,IAAI,CAAC,sDAAD,EAAyD,MAAOO,IAAP,IAAgB;;AAE3E,QAAMC,OAAO,GAAGT,KAAK,CAACU,aAAN,EAAhB;;AAEA,MAAI;;AAEF,QAAIC,IAAI,GAAG,IAAIT,cAAJ,CAAmBC,OAAO,CAACS,OAAR,CAAgB,cAAhB,CAAnB,CAAX;;AAEA,QAAI;AACFH,MAAAA,OAAO,CAACI,GAAR,CAAYF,IAAZ,EAAkB,gBAAlB;AACA,YAAMA,IAAI,CAACG,MAAL,CAAYC,MAAZ,EAAN;AACAP,MAAAA,IAAI,CAACQ,IAAL,CAAUL,IAAI,CAACM,cAAL,CAAoBC,UAA9B;AACD,KAJD,SAIU;AACR,YAAMP,IAAI,CAACQ,GAAL,EAAN;AACD;;AAEF,GAZD,SAYU;AACRV,IAAAA,OAAO,CAACW,OAAR;AACD;;AAEF,CApBG,CAAJ","sourcesContent":["import Sinon from 'sinon'\nimport Test from 'ava'\n\nimport { NextWorkerPool } from '../../../index.js'\n\nconst Require = __require\n\n// Test('NextWorkerPool._selectProcess()', async (test) => {\n\n//   let pool = new NextWorkerPool()\n\n//   try {\n//     await test.notThrows(() => pool._selectProcess())\n//   } finally {\n//     await pool.end()\n//   }\n\n// })\n\nTest('NextWorkerPool._selectProcess(methodName, parameter)', async (test) => {\n\n  const sandbox = Sinon.createSandbox()\n\n  try {\n\n    let pool = new NextWorkerPool(Require.resolve('../worker.js'))\n\n    try {\n      sandbox.spy(pool, '_selectProcess')\n      await pool.module.getPid()\n      test.true(pool._selectProcess.calledOnce)\n    } finally {\n      await pool.end()\n    }\n  \n  } finally {\n    sandbox.restore()\n  }\n\n})\n\n"],"file":"next-worker-pool.test.js"}