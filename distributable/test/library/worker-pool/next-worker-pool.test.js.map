{"version":3,"sources":["../../../../source/test/library/worker-pool/next-worker-pool.test.js"],"names":["Sinon","Test","NextWorkerPool","Require","_createRequire","import","meta","url","test","sandbox","createSandbox","pool","resolve","spy","module","getPid","true","_selectProcess","calledOnce","calledWith","end","restore"],"mappings":"yDAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,KAAjB;;AAEA,SAASC,cAAT,QAA+B,mBAA/B;;AAEA,MAAMC,OAAO,GALbC,cAAc,CAACC,MAAM,CAACC,IAAP,CAAYC,GAAb,CAKd;;AAEAN,IAAI,CAAC,sDAAD,EAAyD,MAAOO,IAAP,IAAgB;;AAE3E,QAAMC,OAAO,GAAGT,KAAK,CAACU,aAAN,EAAhB;;AAEA,MAAI;;AAEF,QAAIC,IAAI,GAAG,IAAIT,cAAJ,CAAmBC,OAAO,CAACS,OAAR,CAAgB,cAAhB,CAAnB,CAAX;;AAEA,QAAI;;AAEFH,MAAAA,OAAO,CAACI,GAAR,CAAYF,IAAZ,EAAkB,gBAAlB;;AAEA,YAAMA,IAAI,CAACG,MAAL,CAAYC,MAAZ,EAAN;;AAEAP,MAAAA,IAAI,CAACQ,IAAL,CAAUL,IAAI,CAACM,cAAL,CAAoBC,UAA9B;AACAV,MAAAA,IAAI,CAACQ,IAAL,CAAUL,IAAI,CAACM,cAAL,CAAoBE,UAApB,CAA+B,QAA/B,EAAyC,EAAzC,CAAV;;AAED,KATD,SASU;AACR,YAAMR,IAAI,CAACS,GAAL,EAAN;AACD;;AAEF,GAjBD,SAiBU;AACRX,IAAAA,OAAO,CAACY,OAAR;AACD;;AAEF,CAzBG,CAAJ","sourcesContent":["import Sinon from 'sinon'\nimport Test from 'ava'\n\nimport { NextWorkerPool } from '../../../index.js'\n\nconst Require = __require\n\nTest('NextWorkerPool._selectProcess(methodName, parameter)', async (test) => {\n\n  const sandbox = Sinon.createSandbox()\n\n  try {\n\n    let pool = new NextWorkerPool(Require.resolve('../worker.js'))\n\n    try {\n\n      sandbox.spy(pool, '_selectProcess')\n\n      await pool.module.getPid()\n\n      test.true(pool._selectProcess.calledOnce)\n      test.true(pool._selectProcess.calledWith('getPid', []))\n\n    } finally {\n      await pool.end()\n    }\n  \n  } finally {\n    sandbox.restore()\n  }\n\n})\n\n"],"file":"next-worker-pool.test.js"}