{"version":3,"sources":["../../../source/test/library/exit-pool.test.js"],"names":["Test","ExitPool","test","pool","code","Promise","resolve","onExit","on","processInformation","_code","push","length","numberOfProcess","off","is"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,KAAjB;;AAEA,SAASC,QAAT,QAAyB,gBAAzB;;AAEAD,IAAI,CAAC,gBAAD,EAAmB,MAAOE,IAAP,IAAgB;;AAErC,MAAIC,IAAI,GAAG,IAAIF,QAAJ,CAAa,EAAE,mBAAmB,CAArB,EAAb,CAAX;AACA,MAAIG,IAAI,GAAG,MAAM,IAAIC,OAAJ,CAAaC,OAAD,IAAa;;AAExC,QAAIF,IAAI,GAAG,EAAX;AACA,QAAIG,MAAM,GAAG,IAAb;;AAEAJ,IAAAA,IAAI,CAACK,EAAL,CAAQ,MAAR,EAAgBD,MAAM,GAAG,CAACE,kBAAD,EAAqBC,KAArB,KAA+B;;AAEtDN,MAAAA,IAAI,CAACO,IAAL,CAAUD,KAAV;;AAEA,UAAIN,IAAI,CAACQ,MAAL,KAAgBT,IAAI,CAACU,eAAzB,EAA0C;;AAExCV,QAAAA,IAAI,CAACW,GAAL,CAAS,MAAT,EAAiBP,MAAjB;AACAA,QAAAA,MAAM,GAAG,IAAT;;AAEAD,QAAAA,OAAO,CAACF,IAAD,CAAP;;AAED;;AAEF,KAbD;;AAeD,GApBgB,CAAjB;;AAsBAF,EAAAA,IAAI,CAACa,EAAL,CAAQX,IAAI,CAAC,CAAD,CAAZ,EAAiB,CAAjB;;AAED,CA3BG,CAAJ","sourcesContent":["import Test from 'ava'\n\nimport { ExitPool } from './exit-pool.js'\n\nTest('new ExitPool()', async (test) => {\n\n  let pool = new ExitPool({ 'numberOfProcess': 2 })\n  let code = await new Promise((resolve) => {\n\n    let code = []\n    let onExit = null\n\n    pool.on('exit', onExit = (processInformation, _code) => {\n\n      code.push(_code)\n\n      if (code.length === pool.numberOfProcess) {\n\n        pool.off('exit', onExit)\n        onExit = null\n\n        resolve(code)\n\n      }\n\n    })\n\n  })\n\n  test.is(code[0], 0)\n\n})\n"],"file":"exit-pool.test.js"}