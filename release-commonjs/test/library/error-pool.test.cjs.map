{"version":3,"sources":["../../../source/test/library/error-pool.test.js"],"names":["test","Is","windows","throws","ErrorPool","pool","error","Promise","resolve","onError","on","index","process","log","code","off","is"],"mappings":";;AAAA;;AACA;;AAEA;;;;AAEA,kBAAK,iBAAL,EAAwB,MAAOA,IAAP,IAAgB;AAEtC,MAAIC,cAAGC,OAAH,EAAJ,EAAkB;AAChBF,IAAAA,IAAI,CAACG,MAAL,CAAY,MAAM,IAAIC,oBAAJ,CAAc;AAAE,yBAAmB;AAArB,KAAd,CAAlB,EAA2D;AAAE,cAAQ;AAAV,KAA3D;AACD,GAFD,MAEO;AAEL,QAAIC,IAAI,GAAG,IAAID,oBAAJ,CAAc;AAAE,yBAAmB;AAArB,KAAd,CAAX;AACA,QAAIE,KAAK,GAAG,MAAM,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAEzC,UAAIC,OAAO,GAAG,IAAd;AAEAJ,MAAAA,IAAI,CAACK,EAAL,CAAQ,OAAR,EAAiBD,OAAO,GAAG,CAACE,KAAD,EAAQC,OAAR,EAAiBN,KAAjB,KAA2B;AACpDN,QAAAA,IAAI,CAACa,GAAL,CAAU,+BAA8BF,KAAM,eAAcL,KAAK,CAACQ,IAAK,gBAAvE;AAEAT,QAAAA,IAAI,CAACU,GAAL,CAAS,OAAT,EAAkBN,OAAlB;AACAA,QAAAA,OAAO,GAAG,IAAV;AAEAD,QAAAA,OAAO,CAACF,KAAD,CAAP;AAED,OARD;AAUD,KAdiB,CAAlB;AAgBAN,IAAAA,IAAI,CAACgB,EAAL,CAAQV,KAAK,CAACQ,IAAd,EAAoB,QAApB;AAED;AAEF,CA3BD","sourcesContent":["import { Is } from '@virtualpatterns/mablung-is'\nimport Test from 'ava'\n\nimport { ErrorPool } from './error-pool.js'\n\nTest('new ErrorPool()', async (test) => {\n\n  if (Is.windows()) {\n    test.throws(() => new ErrorPool({ 'numberOfProcess': 1 }), { 'code': 'UNKNOWN'})\n  } else {\n\n    let pool = new ErrorPool({ 'numberOfProcess': 1 })\n    let error = await new Promise((resolve) => {\n\n      let onError = null\n\n      pool.on('error', onError = (index, process, error) => {\n        test.log(`pool.on('error', onError = (${index}, process, '${error.code}') => { ... })`)\n\n        pool.off('error', onError)\n        onError = null\n\n        resolve(error)\n\n      })\n\n    })\n\n    test.is(error.code, 'EACCES')\n\n  }\n\n})\n"],"file":"error-pool.test.cjs"}