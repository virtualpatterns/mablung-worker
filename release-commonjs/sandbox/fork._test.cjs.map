{"version":3,"sources":["../../source/sandbox/fork._test.js"],"names":["Require","require","test","childProcess","ChildProcess","fork","resolve","on","error","console","log","truthy","pid","Promise","setTimeout"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,OAAO,GAHbC,OAGA,C,CAA0B;;AAE1B,kBAAK,KAAL,EAAaC,IAAD,IAAU;AAEpB,MAAIC,YAAY,GAAGC,uBAAaC,IAAb,CAAkBL,OAAO,CAACM,OAAR,CAAgB,cAAhB,CAAlB,EAAkD,EAAlD,EAAsD;AAAE,gBAAY;AAAd,GAAtD,CAAnB;;AAEAH,EAAAA,YAAY,CAACI,EAAb,CAAgB,OAAhB,EAA0BC,KAAD,IAAW;AAClCC,IAAAA,OAAO,CAACD,KAAR,CAAc,gDAAd;AACAC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD,GAHD;AAKAL,EAAAA,YAAY,CAACI,EAAb,CAAgB,MAAhB,EAAwB,MAAM;AAC5BE,IAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACD,GAFD;AAIAR,EAAAA,IAAI,CAACS,MAAL,CAAYR,YAAY,CAACS,GAAzB;AAEA,SAAO,IAAIC,OAAJ,CAAY,CAACP;AAAO;AAAR,OAA2B;AAC5CQ,IAAAA,UAAU,CAAC,MAAM;AACfR,MAAAA,OAAO,GADQ,CAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KATS,EASP,IATO,CAAV;AAWD,GAZM,CAAP;AAcD,CA7BD","sourcesContent":["import ChildProcess from 'child_process'\nimport Test from 'ava'\n\nconst Require = __require // __require is replaced by @virtualpatterns/mablung-babel-plugin-replace\n\nTest('...', (test) => {\n\n  let childProcess = ChildProcess.fork(Require.resolve('./forked.js'), [], { 'execPath': '/abc' })\n\n  childProcess.on('error', (error) => {\n    console.error('childProcess.on(\\'error\\', (error) => { ... })')\n    console.error(error)\n  })\n\n  childProcess.on('exit', () => {\n    console.log('childProcess.on(\\'exit\\', () => { ... })')\n  })\n\n  test.truthy(childProcess.pid)\n\n  return new Promise((resolve/* , reject */) => {\n    setTimeout(() => {\n      resolve()\n      // childProcess.send({ 'type': 'end' }, (error) => {\n      //   if (error) {\n      //     reject(error)\n      //   } else {\n      //     resolve()\n      //   }\n      // })\n    }, 2500)\n    \n  })\n\n})\n"],"file":"fork._test.cjs"}