{"version":3,"sources":["../../../../source/test/library/worker-pool/random-worker-pool.test.js"],"names":["Require","require","test","sandbox","Sinon","createSandbox","pool","RandomWorkerPool","resolve","spy","module","getPid","true","_selectProcess","calledOnce","calledWith","exit","restore"],"mappings":";;AAAA;;AACA;;AAEA;;;;AAEA,MAAMA,OAAO,GALbC,OAKA;AAEA,kBAAK,wDAAL,EAA+D,MAAOC,IAAP,IAAgB;AAE7E,QAAMC,OAAO,GAAGC,eAAMC,aAAN,EAAhB;;AAEA,MAAI;AAEF,QAAIC,IAAI,GAAG,IAAIC,uBAAJ,CAAqBP,OAAO,CAACQ,OAAR,CAAgB,eAAhB,CAArB,CAAX;;AAEA,QAAI;AAEFL,MAAAA,OAAO,CAACM,GAAR,CAAYH,IAAZ,EAAkB,gBAAlB;AAEA,YAAMA,IAAI,CAACI,MAAL,CAAYC,MAAZ,EAAN;AAEAT,MAAAA,IAAI,CAACU,IAAL,CAAUN,IAAI,CAACO,cAAL,CAAoBC,UAA9B;AACAZ,MAAAA,IAAI,CAACU,IAAL,CAAUN,IAAI,CAACO,cAAL,CAAoBE,UAApB,CAA+B,QAA/B,EAAyC,EAAzC,CAAV;AAED,KATD,SASU;AACR,YAAMT,IAAI,CAACU,IAAL,EAAN;AACD;AAEF,GAjBD,SAiBU;AACRb,IAAAA,OAAO,CAACc,OAAR;AACD;AAEF,CAzBD","sourcesContent":["import Sinon from 'sinon'\nimport Test from 'ava'\n\nimport { RandomWorkerPool } from '../../../index.js'\n\nconst Require = __require\n\nTest('RandomWorkerPool._selectProcess(methodName, parameter)', async (test) => {\n\n  const sandbox = Sinon.createSandbox()\n\n  try {\n\n    let pool = new RandomWorkerPool(Require.resolve('../worker.js'))\n\n    try {\n\n      sandbox.spy(pool, '_selectProcess')\n\n      await pool.module.getPid()\n\n      test.true(pool._selectProcess.calledOnce)\n      test.true(pool._selectProcess.calledWith('getPid', []))\n\n    } finally {\n      await pool.exit()\n    }\n  \n  } finally {\n    sandbox.restore()\n  }\n\n})\n\n"],"file":"random-worker-pool.test.cjs"}